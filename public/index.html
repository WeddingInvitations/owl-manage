<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OwlManage </title>
    <link rel="stylesheet" href="css/styles.css?v=20250206l" />
  </head>
  <body class="dark">
    <header class="app-header">
      <div>
        <h1>OwlManage</h1>
        <p class="muted">MVP interno Â· Contabilidad Â· Fichajes Â· Entrenamientos Â· Pagos</p>
      </div>
      <div class="auth-status">
        <span id="userBadge" class="badge">Invitado</span>
        <button id="logoutBtn" class="btn ghost" disabled>Cerrar sesiÃ³n</button>
      </div>
    </header>

    <section id="mainShell" class="main-shell hidden">
      <nav class="side-menu">
        <h2>MenÃº</h2>
        <button class="menu-btn active" data-view="summaryView">Resumen</button>
        <button class="menu-btn" data-view="paymentsView">Ingresos</button>
        <button class="menu-btn" data-view="expensesView">Gastos</button>
        <button class="menu-btn" data-view="checkinsView">Fichajes</button>
        <button class="menu-btn" data-view="trainingsView">Entrenamientos</button>
        <button class="menu-btn" data-view="athletesView">Atletas</button>
        <button class="menu-btn" data-view="acrobaticsView">Atletas acrobacias</button>
        <button class="menu-btn" data-view="rolesView">Roles</button>
      </nav>
      <section class="content">
        <section id="summaryView" class="view">
          <div class="card">
            <h2>Resumen</h2>
            <div class="summary">
              <div>
                <p class="label">Ingresos</p>
                <p id="summaryIncome" class="value">0 â‚¬</p>
              </div>
              <div>
                <p class="label">Gastos</p>
                <p id="summaryExpenses" class="value">0 â‚¬</p>
              </div>
              <div>
                <p class="label">Beneficio</p>
                <p id="summaryProfit" class="value">0 â‚¬</p>
              </div>
            </div>
            <button id="refreshSummary" class="btn ghost">Actualizar</button>
          </div>
          <div class="card">
            <div class="detail-header">
              <h3>Balance anual</h3>
              <select id="monthlyYearSelect"></select>
            </div>
            <table class="table">
              <thead>
                <tr>
                  <th>Mes</th>
                  <th>Ingresos</th>
                  <th>Gastos</th>
                  <th>Balance</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="monthlySummaryBody"></tbody>
            </table>
          </div>
          <div id="monthlyDetailCard" class="card hidden">
            <div class="detail-header">
              <h3 id="monthlyDetailTitle">Detalle mensual</h3>
              <button id="monthlyDetailClose" class="btn ghost" type="button">
                Cerrar
              </button>
            </div>
            <div class="detail-grid">
              <div>
                <h4>Ingresos</h4>
                <table class="table">
                  <thead>
                    <tr>
                      <th>Fecha</th>
                      <th>Concepto</th>
                      <th>Importe</th>
                    </tr>
                  </thead>
                  <tbody id="monthlyIncomeBody"></tbody>
                </table>
              </div>
              <div>
                <h4>Gastos</h4>
                <table class="table">
                  <thead>
                    <tr>
                      <th>Fecha</th>
                      <th>Concepto</th>
                      <th>Importe</th>
                    </tr>
                  </thead>
                  <tbody id="monthlyExpenseBody"></tbody>
                </table>
              </div>
            </div>
            <p id="monthlyDetailBalance" class="muted"></p>
          </div>
        </section>

        <section id="paymentsView" class="view hidden">
          <div class="card">
            <div class="detail-header">
              <h2>Contabilidad Â· Ingresos</h2>
              <select id="paymentMonthSelect"></select>
            </div>
            <form id="paymentForm" class="stack">
              <label>
                Concepto
                <input id="paymentConcept" type="text" required />
              </label>
              <label>
                Fecha
                <input id="paymentDate" type="date" required />
              </label>
              <label>
                Importe (â‚¬)
                <input id="paymentAmount" type="number" min="0" step="0.01" required />
              </label>
              <button class="btn" type="submit">Registrar ingreso</button>
            </form>
            <ul id="paymentList" class="list"></ul>
          </div>
        </section>

        <section id="expensesView" class="view hidden">
          <div class="card">
            <div class="detail-header">
              <h2>Contabilidad Â· Gastos</h2>
              <select id="expenseMonthSelect"></select>
            </div>
            <form id="expenseForm" class="stack">
              <label>
                Concepto
                <input id="expenseConcept" type="text" required />
              </label>
              <label>
                Fecha
                <input id="expenseDate" type="date" required />
              </label>
              <label>
                Importe (â‚¬)
                <input id="expenseAmount" type="number" min="0" step="0.01" required />
              </label>
              <button class="btn" type="submit">Registrar gasto</button>
            </form>
            <ul id="expenseList" class="list"></ul>
          </div>
        </section>

        <section id="checkinsView" class="view hidden">
          <div class="card">
            <h2>Fichajes</h2>
            <form id="checkinForm" class="stack">
              <label>
                Nombre
                <input id="checkinName" type="text" required />
              </label>
              <label>
                Tipo
                <select id="checkinType">
                  <option value="IN">Check-in</option>
                  <option value="OUT">Check-out</option>
                </select>
              </label>
              <button class="btn" type="submit">Registrar fichaje</button>
            </form>
            <ul id="checkinList" class="list"></ul>
          </div>
        </section>

        <section id="trainingsView" class="view hidden">
          <div class="card">
            <h2>Entrenamientos planificados</h2>
            <form id="trainingForm" class="stack">
              <label>
                TÃ­tulo
                <input id="trainingTitle" type="text" required />
              </label>
              <label>
                Fecha
                <input id="trainingDate" type="date" required />
              </label>
              <label>
                Coach
                <input id="trainingCoach" type="text" />
              </label>
              <button class="btn" type="submit">Crear sesiÃ³n</button>
            </form>
            <ul id="trainingList" class="list"></ul>
          </div>
        </section>

        <section id="athletesView" class="view hidden">
          <div class="card">
            <h2>Control de pagos de usuarios</h2>
            <div class="detail-header">
              <div class="table-actions">
                <button id="athleteCsvOpen" class="btn ghost small" type="button" title="Carga masiva CSV">
                  ðŸ“„ CSV
                </button>
                <button id="athleteModalOpen" class="btn" type="button">
                  Alta de usuario
                </button>
              </div>
            </div>
          </div>
          <div id="athleteModal" class="modal hidden">
            <div class="modal-content card">
              <div class="detail-header">
                <h3>Alta de usuario</h3>
                <button id="athleteModalClose" class="btn ghost small" type="button">
                  Cerrar
                </button>
              </div>
              <form id="athleteForm" class="stack">
                <label>
                  Nombre
                  <input id="athleteName" type="text" list="athleteNameList" required />
                </label>
                <datalist id="athleteNameList"></datalist>
                <label>
                  Mes de pago
                  <select id="athletePaymentMonth"></select>
                </label>
                <label>
                  Tarifa
                  <select id="athleteTariff">
                    <option value="8/mes">8/mes</option>
                    <option value="12/mes">12/mes</option>
                    <option value="Ilimitado">Ilimitado</option>
                    <option value="Trimestre 8/mes">Trimestre 8/mes</option>
                    <option value="Trimestre 12/mes">Trimestre 12/mes</option>
                    <option value="Trimestre ilimitado">Trimestre ilimitado</option>
                    <option value="Semestre 8/mes">Semestre 8/mes</option>
                    <option value="Semestre 12/mes">Semestre 12/mes</option>
                    <option value="Semestre ilimitado">Semestre ilimitado</option>
                    <option value="Anual 8/mes">Anual 8/mes</option>
                    <option value="Anual 12/mes">Anual 12/mes</option>
                    <option value="Anual ilimitado">Anual ilimitado</option>
                  </select>
                </label>
                <label>
                  Precio (â‚¬)
                  <input id="athletePrice" type="number" min="0" step="0.01" readonly />
                </label>
                <label>
                  Pagado
                  <select id="athletePaid">
                    <option value="SI">SI</option>
                    <option value="NO">NO</option>
                  </select>
                </label>
                <button class="btn" type="submit">AÃ±adir atleta</button>
              </form>
            </div>
          </div>
          <div id="athleteCsvModal" class="modal hidden">
            <div class="modal-content card">
              <div class="detail-header">
                <h3>Carga masiva de atletas</h3>
                <button id="athleteCsvClose" class="btn ghost small" type="button">
                  Cerrar
                </button>
              </div>
              <form id="athleteCsvForm" class="stack">
                <label>
                  Archivo CSV
                  <input id="athleteCsvFile" type="file" accept=".csv,text/csv" required />
                </label>
                <label>
                  Mes de pago
                  <select id="athleteCsvMonth"></select>
                </label>
                <button class="btn" type="submit">Importar</button>
                <p id="athleteCsvStatus" class="muted"></p>
              </form>
            </div>
          </div>
          <div class="card">
            <div class="detail-header">
              <h3>Resumen mensual</h3>
              <select id="athleteMonthSelect"></select>
            </div>
            <div class="summary">
              <div>
                <p class="label">Activos</p>
                <p id="athleteSummaryActive" class="value">0</p>
              </div>
              <div>
                <p class="label">Tarifa media</p>
                <p id="athleteSummaryAverage" class="value">0 â‚¬</p>
              </div>
              <div>
                <p class="label">Altas nuevas</p>
                <p id="athleteSummaryNew" class="value">0</p>
              </div>
              <div>
                <p class="label">Bajas</p>
                <p id="athleteSummaryDrop" class="value">0</p>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="detail-header">
              <h3>Listado mensual</h3>
              <select id="athleteListMonthSelect"></select>
              <label>
                Buscar atleta
                <input
                  id="athleteSearch"
                  type="search"
                  list="athleteSearchList"
                  placeholder="Nombre..."
                />
              </label>
              <label>
                Pagado
                <select id="athletePaidFilter">
                  <option value="ALL">Todos</option>
                  <option value="SI">Pagado</option>
                  <option value="NO">No pagado</option>
                </select>
              </label>
            </div>
            <datalist id="athleteSearchList"></datalist>
            <table class="table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Tarifa</th>
                  <th>Precio</th>
                  <th>Pagado</th>
                  <th>Activo</th>
                  <th>AcciÃ³n</th>
                </tr>
              </thead>
              <tbody id="athleteList"></tbody>
            </table>
            <p id="athleteListCount" class="muted"></p>
          </div>
        </section>

        <section id="acrobaticsView" class="view hidden">
          <div class="card">
            <h2>Control de pagos Â· Acrobacias</h2>
            <div class="detail-header">
              <div class="table-actions">
                <button id="acroCsvOpen" class="btn ghost small" type="button" title="Carga masiva CSV">
                  ðŸ“„ CSV
                </button>
                <button id="acroModalOpen" class="btn" type="button">
                  Alta de usuario
                </button>
              </div>
            </div>
          </div>
          <div id="acroModal" class="modal hidden">
            <div class="modal-content card">
              <div class="detail-header">
                <h3>Alta de usuario Â· Acrobacias</h3>
                <button id="acroModalClose" class="btn ghost small" type="button">
                  Cerrar
                </button>
              </div>
              <form id="acroForm" class="stack">
                <label>
                  Nombre
                  <input id="acroName" type="text" list="acroNameList" required />
                </label>
                <datalist id="acroNameList"></datalist>
                <label>
                  Mes de pago
                  <select id="acroPaymentMonth"></select>
                </label>
                <label>
                  Tarifa
                  <select id="acroTariff">
                    <option value="4/mes">4/mes</option>
                    <option value="8/mes">8/mes</option>
                    <option value="12/mes">12/mes</option>
                    <option value="Ilimitado">Ilimitado</option>
                  </select>
                </label>
                <label>
                  Precio (â‚¬)
                  <input id="acroPrice" type="number" min="0" step="0.01" readonly />
                </label>
                <label>
                  Pagado
                  <select id="acroPaid">
                    <option value="SI">SI</option>
                    <option value="NO">NO</option>
                  </select>
                </label>
                <button class="btn" type="submit">AÃ±adir atleta</button>
              </form>
            </div>
          </div>
          <div id="acroCsvModal" class="modal hidden">
            <div class="modal-content card">
              <div class="detail-header">
                <h3>Carga masiva Â· Acrobacias</h3>
                <button id="acroCsvClose" class="btn ghost small" type="button">
                  Cerrar
                </button>
              </div>
              <form id="acroCsvForm" class="stack">
                <label>
                  Archivo CSV
                  <input id="acroCsvFile" type="file" accept=".csv,text/csv" required />
                </label>
                <label>
                  Mes de pago
                  <select id="acroCsvMonth"></select>
                </label>
                <button class="btn" type="submit">Importar</button>
                <p id="acroCsvStatus" class="muted"></p>
              </form>
            </div>
          </div>
          <div class="card">
            <div class="detail-header">
              <h3>Resumen mensual</h3>
              <select id="acroMonthSelect"></select>
            </div>
            <div class="summary">
              <div>
                <p class="label">Activos</p>
                <p id="acroSummaryActive" class="value">0</p>
              </div>
              <div>
                <p class="label">Tarifa media</p>
                <p id="acroSummaryAverage" class="value">0 â‚¬</p>
              </div>
              <div>
                <p class="label">Altas nuevas</p>
                <p id="acroSummaryNew" class="value">0</p>
              </div>
              <div>
                <p class="label">Bajas</p>
                <p id="acroSummaryDrop" class="value">0</p>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="detail-header">
              <h3>Listado mensual</h3>
              <select id="acroListMonthSelect"></select>
              <label>
                Buscar atleta
                <input id="acroSearch" type="search" list="acroSearchList" placeholder="Nombre..." />
              </label>
              <label>
                Pagado
                <select id="acroPaidFilter">
                  <option value="ALL">Todos</option>
                  <option value="SI">Pagado</option>
                  <option value="NO">No pagado</option>
                </select>
              </label>
            </div>
            <datalist id="acroSearchList"></datalist>
            <table class="table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Tarifa</th>
                  <th>Precio</th>
                  <th>Pagado</th>
                  <th>Activo</th>
                  <th>AcciÃ³n</th>
                </tr>
              </thead>
              <tbody id="acroList"></tbody>
            </table>
            <p id="acroListCount" class="muted"></p>
          </div>
        </section>

        <section id="rolesView" class="view hidden">
          <div id="rolesPanel" class="card hidden">
            <h2>Roles de usuarios (OWNER)</h2>
            <form id="createUserForm" class="stack">
              <label>
                Email
                <input id="createUserEmail" type="email" required />
              </label>
              <label>
                ContraseÃ±a temporal
                <input id="createUserTempPassword" type="password" required />
              </label>
              <label>
                Rol
                <select id="createUserRole">
                  <option value="OWNER">OWNER</option>
                  <option value="COACH">COACH</option>
                  <option value="RECEPTION">RECEPTION</option>
                </select>
              </label>
              <button class="btn" type="submit">Crear usuario</button>
              <p id="createUserStatus" class="muted"></p>
            </form>
            <form id="roleForm" class="stack">
              <label>
                UID del usuario
                <input id="roleUserId" type="text" required />
              </label>
              <label>
                Rol
                <select id="roleValue">
                  <option value="OWNER">OWNER</option>
                  <option value="COACH">COACH</option>
                  <option value="RECEPTION">RECEPTION</option>
                </select>
              </label>
              <button class="btn" type="submit">Actualizar rol</button>
            </form>
            <ul id="userList" class="list"></ul>
          </div>
        </section>
      </section>
    </section>

    <main class="grid">
      <section class="card" id="loginView">
        <h2>Acceso</h2>
        <form id="loginForm" class="stack">
          <label>
            Email
            <input id="loginEmail" type="email" required />
          </label>
          <label>
            ContraseÃ±a
            <input id="loginPassword" type="password" required />
          </label>
          <button class="btn" type="submit">Entrar</button>
          <button id="googleLoginBtn" class="btn ghost" type="button">
            Entrar con Google
          </button>
          <p class="muted">* Usuarios se gestionan en Firebase Auth.</p>
        </form>
      </section>
    </main>

    <footer class="app-footer">
      <p class="muted">OwlManage MVP Â· Firebase Auth + Firestore</p>
    </footer>

    <script type="module" src="js/main.js?v=20250206s"></script>
  </body>
</html>
